import{Z as ve,r as T,aj as Ce,X as R,Y as z,j as e,ak as ye,h as J,al as be,a0 as we,a4 as Ne,am as Te,a5 as Le,an as Se,a6 as ze,a7 as Ae,ao as ke,G as V,c as Ie,ac as te,J as Fe,a as se,ap as De,q as M,K as Ue,u as Me,aq as Re,H as $e,F as O,T as b,L as _e,e as Ee,S as Z,b as q,d as H,ar as K,f as Be,A as F,as as Q,g as Oe}from"./index-CU6HyXET.js";import{D as Ze}from"./DeleteUserModal-CVFBYKvA.js";import{a as X,I as Y,T as h}from"./IconTrash-B25C7zNj.js";function N(a,s){const o=s-a+1;return Array.from({length:o},(n,i)=>i+a)}const D="dots";function Ve({total:a,siblings:s=1,boundaries:o=1,page:n,initialPage:i=1,onChange:m}){const r=Math.max(Math.trunc(a),0),[c,u]=ve({value:n,onChange:m,defaultValue:i,finalValue:i}),d=P=>{P<=0?u(1):P>r?u(r):u(P)},g=()=>d(c+1),x=()=>d(c-1),v=()=>d(1),j=()=>d(r);return{range:T.useMemo(()=>{if(s*2+3+o*2>=r)return N(1,r);const w=Math.max(c-s,o),y=Math.min(c+s,r-o),t=w>o+2,l=y<r-(o+1);if(!t&&l){const p=s*2+o+2;return[...N(1,p),D,...N(r-(o-1),r)]}if(t&&!l){const p=o+1+2*s;return[...N(1,o),D,...N(r-p,r)]}return[...N(1,o),D,...N(w,y),D,...N(r-o+1,r)]},[r,s,c]),active:c,setPage:d,next:g,previous:x,first:v,last:j}}function U(a,s){return o=>{a?.(o),s?.(o)}}const[Je,$]=Ce("Pagination.Root component was not found in tree");var A={root:"m_4addd315",control:"m_326d024a",dots:"m_4ad7767d"};const Ge={withPadding:!0},k=R((a,s)=>{const o=z("PaginationControl",Ge,a),{classNames:n,className:i,style:m,styles:r,vars:c,active:u,disabled:d,withPadding:g,mod:x,...v}=o,j=$(),f=d||j.disabled;return e.jsx(ye,{ref:s,disabled:f,mod:[{active:u,disabled:f,"with-padding":g},x],...j.getStyles("control",{className:i,style:m,classNames:n,styles:r,active:!f}),...v})});k.classes=A;k.displayName="@mantine/core/PaginationControl";function I({style:a,children:s,path:o,...n}){return e.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",style:{width:"calc(var(--pagination-control-size) / 1.8)",height:"calc(var(--pagination-control-size) / 1.8)",...a},...n,children:e.jsx("path",{d:o,fill:"currentColor"})})}const We=a=>e.jsx(I,{...a,path:"M8.781 8l-3.3-3.3.943-.943L10.667 8l-4.243 4.243-.943-.943 3.3-3.3z"}),qe=a=>e.jsx(I,{...a,path:"M7.219 8l3.3 3.3-.943.943L5.333 8l4.243-4.243.943.943-3.3 3.3z"}),He=a=>e.jsx(I,{...a,path:"M6.85355 3.85355C7.04882 3.65829 7.04882 3.34171 6.85355 3.14645C6.65829 2.95118 6.34171 2.95118 6.14645 3.14645L2.14645 7.14645C1.95118 7.34171 1.95118 7.65829 2.14645 7.85355L6.14645 11.8536C6.34171 12.0488 6.65829 12.0488 6.85355 11.8536C7.04882 11.6583 7.04882 11.3417 6.85355 11.1464L3.20711 7.5L6.85355 3.85355ZM12.8536 3.85355C13.0488 3.65829 13.0488 3.34171 12.8536 3.14645C12.6583 2.95118 12.3417 2.95118 12.1464 3.14645L8.14645 7.14645C7.95118 7.34171 7.95118 7.65829 8.14645 7.85355L12.1464 11.8536C12.3417 12.0488 12.6583 12.0488 12.8536 11.8536C13.0488 11.6583 13.0488 11.3417 12.8536 11.1464L9.20711 7.5L12.8536 3.85355Z"}),Ke=a=>e.jsx(I,{...a,path:"M2.14645 11.1464C1.95118 11.3417 1.95118 11.6583 2.14645 11.8536C2.34171 12.0488 2.65829 12.0488 2.85355 11.8536L6.85355 7.85355C7.04882 7.65829 7.04882 7.34171 6.85355 7.14645L2.85355 3.14645C2.65829 2.95118 2.34171 2.95118 2.14645 3.14645C1.95118 3.34171 1.95118 3.65829 2.14645 3.85355L5.79289 7.5L2.14645 11.1464ZM8.14645 11.1464C7.95118 11.3417 7.95118 11.6583 8.14645 11.8536C8.34171 12.0488 8.65829 12.0488 8.85355 11.8536L12.8536 7.85355C13.0488 7.65829 13.0488 7.34171 12.8536 7.14645L8.85355 3.14645C8.65829 2.95118 8.34171 2.95118 8.14645 3.14645C7.95118 3.34171 7.95118 3.65829 8.14645 3.85355L11.7929 7.5L8.14645 11.1464Z"}),Qe=a=>e.jsx(I,{...a,path:"M2 8c0-.733.6-1.333 1.333-1.333.734 0 1.334.6 1.334 1.333s-.6 1.333-1.334 1.333C2.6 9.333 2 8.733 2 8zm9.333 0c0-.733.6-1.333 1.334-1.333C13.4 6.667 14 7.267 14 8s-.6 1.333-1.333 1.333c-.734 0-1.334-.6-1.334-1.333zM6.667 8c0-.733.6-1.333 1.333-1.333s1.333.6 1.333 1.333S8.733 9.333 8 9.333 6.667 8.733 6.667 8z"}),Xe={icon:Qe},_=R((a,s)=>{const o=z("PaginationDots",Xe,a),{classNames:n,className:i,style:m,styles:r,vars:c,icon:u,...d}=o,g=$();return e.jsx(J,{ref:s,...g.getStyles("dots",{className:i,style:m,styles:r,classNames:n}),...d,children:e.jsx(u,{style:{width:"calc(var(--pagination-control-size) / 1.8)",height:"calc(var(--pagination-control-size) / 1.8)"}})})});_.classes=A;_.displayName="@mantine/core/PaginationDots";function E({icon:a,name:s,action:o,type:n}){const i={icon:a},m=T.forwardRef((r,c)=>{const{icon:u,...d}=z(s,i,r),g=$(),x=n==="next"?g.active===g.total:g.active===1;return e.jsx(k,{disabled:g.disabled||x,ref:c,onClick:g[o],withPadding:!1,...d,children:e.jsx(u,{className:"mantine-rotate-rtl",style:{width:"calc(var(--pagination-control-size) / 1.8)",height:"calc(var(--pagination-control-size) / 1.8)"}})})});return m.displayName=`@mantine/core/${s}`,be(m)}const ae=E({icon:We,name:"PaginationNext",action:"onNext",type:"next"}),oe=E({icon:qe,name:"PaginationPrevious",action:"onPrevious",type:"previous"}),ne=E({icon:He,name:"PaginationFirst",action:"onFirst",type:"previous"}),ie=E({icon:Ke,name:"PaginationLast",action:"onLast",type:"next"});function G({dotsIcon:a}){const s=$(),o=s.range.map((n,i)=>n==="dots"?e.jsx(_,{icon:a},i):e.jsx(k,{active:n===s.active,"aria-current":n===s.active?"page":void 0,onClick:()=>s.onChange(n),disabled:s.disabled,...s.getItemProps?.(n),children:s.getItemProps?.(n)?.children??n},i));return e.jsx(e.Fragment,{children:o})}G.displayName="@mantine/core/PaginationItems";const Ye={siblings:1,boundaries:1},et=Ne((a,{size:s,radius:o,color:n,autoContrast:i})=>({root:{"--pagination-control-radius":o===void 0?void 0:Ae(o),"--pagination-control-size":ze(s,"pagination-control-size"),"--pagination-control-fz":Se(s),"--pagination-active-bg":n?Le(n,a):void 0,"--pagination-active-color":ke(i,a)?Te({color:n,theme:a,autoContrast:i}):void 0}})),B=R((a,s)=>{const o=z("PaginationRoot",Ye,a),{classNames:n,className:i,style:m,styles:r,unstyled:c,vars:u,total:d,value:g,defaultValue:x,onChange:v,disabled:j,siblings:f,boundaries:P,color:w,radius:y,onNextPage:t,onPreviousPage:l,onFirstPage:p,onLastPage:L,getItemProps:S,autoContrast:nt,attributes:re,...le}=o,W=we({name:"Pagination",classes:A,props:o,className:i,style:m,classNames:n,styles:r,unstyled:c,attributes:re,vars:u,varsResolver:et}),{range:ce,setPage:de,next:me,previous:he,active:pe,first:ge,last:ue}=Ve({page:g,initialPage:x,onChange:v,total:d,siblings:f,boundaries:P}),xe=U(t,me),je=U(l,he),fe=U(p,ge),Pe=U(L,ue);return e.jsx(Je,{value:{total:d,range:ce,active:pe,disabled:j,getItemProps:S,onChange:de,onNext:xe,onPrevious:je,onFirst:fe,onLast:Pe,getStyles:W},children:e.jsx(J,{ref:s,...W("root"),...le})})});B.classes=A;B.displayName="@mantine/core/PaginationRoot";const tt={withControls:!0,withPages:!0,siblings:1,boundaries:1,gap:8},C=R((a,s)=>{const o=z("Pagination",tt,a),{withEdges:n,withControls:i,getControlProps:m,nextIcon:r,previousIcon:c,lastIcon:u,firstIcon:d,dotsIcon:g,total:x,gap:v,hideWithOnePage:j,withPages:f,...P}=o;return x<=0||j&&x===1?null:e.jsx(B,{ref:s,total:x,...P,children:e.jsxs(V,{gap:v,children:[n&&e.jsx(ne,{icon:d,...m?.("first")}),i&&e.jsx(oe,{icon:c,...m?.("previous")}),f&&e.jsx(G,{dotsIcon:g}),i&&e.jsx(ae,{icon:r,...m?.("next")}),n&&e.jsx(ie,{icon:u,...m?.("last")})]})})});C.classes=A;C.displayName="@mantine/core/Pagination";C.Root=B;C.Control=k;C.Dots=_;C.First=ne;C.Last=ie;C.Next=ae;C.Previous=oe;C.Items=G;const st=[["path",{d:"M4 4h16v2.172a2 2 0 0 1 -.586 1.414l-4.414 4.414v7l-6 2v-8.5l-4.48 -4.928a2 2 0 0 1 -.52 -1.345v-2.227z",key:"svg-0"}]],ee=Ie("outline","filter","Filter",st);function at(){const a=te(),s=Fe(n=>n.userSlice.allUsers),o=s===null;return T.useEffect(()=>{s!==null||(async()=>{try{const i=await se.get("/api/users");a(De(i.data))}catch(i){M.show({title:"Error",message:i?.message||"Failed to load users",color:"red"})}})()},[s]),{allUsers:s,isLoading:o}}const ot=()=>{const a=te(),s=Ue(),[o,{open:n,close:i}]=Me(!1),{allUsers:m,isLoading:r}=at(),[c,u]=T.useState(""),[d,g]=T.useState(""),x=async l=>{if(!l)return M.show({title:"Error",message:"User ID not found.",color:"red"});try{(await se.delete(`/api/users/${l}`)).status===200&&(M.show({title:"Warning",message:"Account Deleted.",color:"orange"}),a(Re(l)))}catch(p){M.show({title:"Error",message:p.response.data.message,color:"red"})}},v=l=>l.isAdmin?"Admin":l.profileType==="business"?"Business":"Jobseeker",j=m?[...m].sort((l,p)=>{if(c==="last-name-asc"){const L=l.profileType==="jobseeker"?l.jobseekerProfile?.lastName:l.businessProfile?.companyName,S=p.profileType==="jobseeker"?p.jobseekerProfile?.lastName:p.businessProfile?.companyName;return(L||"").localeCompare(S||"")}else if(c==="last-name-desc"){const L=l.profileType==="jobseeker"?l.jobseekerProfile?.lastName:l.businessProfile?.companyName;return((p.profileType==="jobseeker"?p.jobseekerProfile?.lastName:p.businessProfile?.companyName)||"").localeCompare(L||"")}else{if(c==="account-type")return v(l).localeCompare(v(p));if(c==="date-created-old")return l.createdAt.localeCompare(p.createdAt);if(c==="date-created-new")return p.createdAt.localeCompare(l.createdAt)}return 0}):[],f=j?j.filter(l=>{const p=v(l);return`${l.profileType==="jobseeker"?`${l.jobseekerProfile?.firstName} ${l.jobseekerProfile?.lastName}`:l.businessProfile?.companyName} ${l.email} ${p}`.toLowerCase().includes(d.toLowerCase())}):[],[P,w]=T.useState(1),y=30,t=f?f.slice((P-1)*y,P*y):[];return{opened:o,open:n,close:i,dispatch:a,allUsers:m,isLoading:r,deleteUser:x,getAccountType:v,sortedUsers:j,filteredUsers:f,paginatedUsers:t,currentPage:P,setCurrentPage:w,usersPerPage:y,sortOption:c,setSortOption:u,searchTerm:d,setSearchTerm:g,jumpTo:s}},ct=()=>{const[a,s]=T.useState("");$e("(max-width: 768px)");const{opened:o,open:n,close:i,dispatch:m,allUsers:r,isLoading:c,deleteUser:u,paginatedUsers:d,currentPage:g,setCurrentPage:x,usersPerPage:v,sortOption:j,setSortOption:f,searchTerm:P,setSearchTerm:w,jumpTo:y}=ot();return c?e.jsxs(e.Fragment,{children:[e.jsxs(O,{align:"center",direction:"column",mt:100,children:[e.jsx(b,{size:"xl",fw:600,children:"Users Are Loading"}),e.jsx(_e,{color:"cyan",size:"xl",mt:30})]}),";"]}):e.jsxs(e.Fragment,{children:[e.jsxs(O,{direction:"column",w:"100%",children:[e.jsx(Ee,{fz:30,w:"fit",mx:"auto",my:"sm",children:"Admin Control Table"}),e.jsxs(Z,{gap:"md",hiddenFrom:"md",mx:"auto",my:"md",w:"90%",children:[e.jsx(q,{data:[{value:"last-name-asc",label:"Last Name (A-Z)"},{value:"last-name-desc",label:"Last Name (Z-A)"},{value:"account-type",label:"Account Type"},{value:"date-created-old",label:"Date Created (Oldest First)"},{value:"date-created-new",label:"Date Created (Latest First)"}],placeholder:"Sort By",value:j,onChange:t=>{f(t||""),x(1)},rightSection:e.jsx(ee,{})}),e.jsx(H,{placeholder:"Search",rightSection:e.jsx(K,{}),value:P,onChange:t=>w(t.target.value)})]}),e.jsxs(O,{direction:"row",gap:5,mx:"auto",my:"md",visibleFrom:"md",children:[e.jsx(q,{data:[{value:"last-name-asc",label:"Last Name (A-Z)"},{value:"last-name-desc",label:"Last Name (Z-A)"},{value:"account-type",label:"Account Type"},{value:"date-created-old",label:"Date Created (Oldest First)"},{value:"date-created-new",label:"Date Created (Latest First)"}],placeholder:"Sort By",value:j,onChange:t=>{f(t||""),x(1)},miw:210,rightSection:e.jsx(ee,{})}),e.jsx(H,{placeholder:"Search",rightSection:e.jsx(K,{}),value:P,onChange:t=>w(t.target.value),miw:210})]}),e.jsx(Z,{hiddenFrom:"md",gap:"md",mx:"auto",w:"90%",children:d.map(t=>e.jsx(Be,{withBorder:!0,p:"md",children:e.jsxs(Z,{gap:"xs",children:[e.jsx(V,{justify:"space-between",children:e.jsxs("div",{children:[e.jsx(b,{fw:600,size:"lg",children:t.profileType==="jobseeker"?`${t.jobseekerProfile?.firstName} ${t.jobseekerProfile?.lastName}`:t.businessProfile?.companyName}),e.jsx(b,{size:"sm",c:"dimmed",children:t.isAdmin?"Admin":t.profileType==="business"?"Business":"Jobseeker"})]})}),e.jsx(b,{size:"sm",children:t.email}),e.jsxs(b,{size:"xs",c:"dimmed",children:["Created: ",new Date(t.createdAt).toLocaleDateString()]}),e.jsxs(V,{gap:"xs",mt:"xs",children:[e.jsx(F,{size:36,variant:"outline",color:"yellow",onClick:()=>{m(Q(!0)),y(`/edit-profile/${t?._id}`)},children:e.jsx(X,{size:20})}),!t.isAdmin&&e.jsx(F,{size:36,variant:"outline",color:"red",onClick:()=>{n(),s(t._id)},children:e.jsx(Y,{size:20})})]})]})},t._id))}),e.jsx(J,{visibleFrom:"md",children:e.jsx(h.ScrollContainer,{minWidth:800,children:e.jsxs(h,{verticalSpacing:"sm",maw:"75%",mx:"auto",children:[e.jsx(h.Thead,{children:e.jsxs(h.Tr,{children:[e.jsx(h.Th,{}),e.jsx(h.Th,{children:"First Name"}),e.jsx(h.Th,{children:"Last Name"}),e.jsx(h.Th,{children:"Email"}),e.jsx(h.Th,{children:"Account Type"}),e.jsx(h.Th,{children:"Date Created"}),e.jsx(h.Th,{children:"Edit"}),e.jsx(h.Th,{children:"Delete"})]})}),e.jsx(h.Tbody,{children:d.map(t=>e.jsxs(h.Tr,{children:[e.jsx(h.Td,{styles:{td:{borderLeft:"1px solid #eee",borderRight:"1px solid #eee"}},children:e.jsx(b,{fz:"sm",fw:"bold",c:"dimmed",ta:"center",children:d.indexOf(t)+1})}),e.jsx(h.Td,{children:e.jsx(b,{fz:"sm",fw:500,children:t.profileType==="jobseeker"?`${t.jobseekerProfile?.firstName} ${t.jobseekerProfile?.lastName}`:t.businessProfile?.companyName})}),e.jsx(h.Td,{children:e.jsx(b,{fz:"sm",fw:500,children:t.profileType==="jobseeker"?"Jobseeker":"Business"})}),e.jsx(h.Td,{children:e.jsx(Oe,{component:"button",size:"sm",children:t.email})}),e.jsx(h.Td,{children:e.jsx(b,{fz:"sm",children:t.isAdmin?"Admin":t.profileType==="business"?"Business":"Jobseeker"})}),e.jsx(h.Td,{children:e.jsx(b,{fz:"sm",children:new Date(t.createdAt).toLocaleString()})}),e.jsx(h.Td,{children:e.jsx(F,{size:30,variant:"outline",color:"yellow",onClick:()=>{m(Q(!0)),y(`/edit-profile/${t?._id}`)},children:e.jsx(X,{size:25,stroke:1.5})})}),!t.isAdmin&&e.jsx(h.Td,{styles:{td:{borderRight:"1px solid #eee"}},children:e.jsx(F,{size:30,variant:"outline",color:"red",onClick:()=>{n(),s(t._id)},children:e.jsx(Y,{size:25,stroke:1.5})})})]},t._id))})]})})}),r&&e.jsx(C,{total:Math.ceil(r.length/v),value:g,onChange:t=>{x(t),window.scrollTo({top:0,behavior:"smooth"})},mt:"md",m:"auto"})]}),e.jsx(Ze,{opened:o,close:i,deleteUser:u,id:a})]})};export{ct as default};
