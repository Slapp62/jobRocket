import{_ as Ce,r as L,ak as ye,Y as M,Z as k,j as e,al as be,h as W,am as we,a1 as Ne,a5 as Te,an as Le,a6 as Se,ao as ke,a7 as Ae,a8 as Ie,ap as ze,G,c as Fe,ad as oe,K as De,a as $,aq as Ue,q as R,N as _e,u as Re,ar as $e,H as Me,F as V,T as b,L as Ee,e as Be,S as J,b as K,d as Q,as as Y,f as Oe,A as D,at as X,g as Ze}from"./index-Dbp1fGsr.js";import{D as Ve}from"./DeleteUserModal-DbGC9_mn.js";import{a as ee,I as te,T as h}from"./IconTrash-ZB7--s3y.js";function T(o,s){const a=s-o+1;return Array.from({length:a},(n,r)=>r+o)}const U="dots";function Je({total:o,siblings:s=1,boundaries:a=1,page:n,initialPage:r=1,onChange:c}){const i=Math.max(Math.trunc(o),0),[d,p]=Ce({value:n,onChange:c,defaultValue:r,finalValue:r}),m=f=>{f<=0?p(1):f>i?p(i):p(f)},g=()=>m(d+1),u=()=>m(d-1),v=()=>m(1),x=()=>m(i);return{range:L.useMemo(()=>{if(s*2+3+a*2>=i)return T(1,i);const y=Math.max(d-s,a),N=Math.min(d+s,i-a),t=y>a+2,S=N<i-(a+1);if(!t&&S){const l=s*2+a+2;return[...T(1,l),U,...T(i-(a-1),i)]}if(t&&!S){const l=a+1+2*s;return[...T(1,a),U,...T(i-l,i)]}return[...T(1,a),U,...T(y,N),U,...T(i-a+1,i)]},[i,s,d]),active:d,setPage:m,next:g,previous:u,first:v,last:x}}function _(o,s){return a=>{o?.(a),s?.(a)}}const[Ge,E]=ye("Pagination.Root component was not found in tree");var A={root:"m_4addd315",control:"m_326d024a",dots:"m_4ad7767d"};const We={withPadding:!0},I=M((o,s)=>{const a=k("PaginationControl",We,o),{classNames:n,className:r,style:c,styles:i,vars:d,active:p,disabled:m,withPadding:g,mod:u,...v}=a,x=E(),j=m||x.disabled;return e.jsx(be,{ref:s,disabled:j,mod:[{active:p,disabled:j,"with-padding":g},u],...x.getStyles("control",{className:r,style:c,classNames:n,styles:i,active:!j}),...v})});I.classes=A;I.displayName="@mantine/core/PaginationControl";function z({style:o,children:s,path:a,...n}){return e.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",style:{width:"calc(var(--pagination-control-size) / 1.8)",height:"calc(var(--pagination-control-size) / 1.8)",...o},...n,children:e.jsx("path",{d:a,fill:"currentColor"})})}const qe=o=>e.jsx(z,{...o,path:"M8.781 8l-3.3-3.3.943-.943L10.667 8l-4.243 4.243-.943-.943 3.3-3.3z"}),He=o=>e.jsx(z,{...o,path:"M7.219 8l3.3 3.3-.943.943L5.333 8l4.243-4.243.943.943-3.3 3.3z"}),Ke=o=>e.jsx(z,{...o,path:"M6.85355 3.85355C7.04882 3.65829 7.04882 3.34171 6.85355 3.14645C6.65829 2.95118 6.34171 2.95118 6.14645 3.14645L2.14645 7.14645C1.95118 7.34171 1.95118 7.65829 2.14645 7.85355L6.14645 11.8536C6.34171 12.0488 6.65829 12.0488 6.85355 11.8536C7.04882 11.6583 7.04882 11.3417 6.85355 11.1464L3.20711 7.5L6.85355 3.85355ZM12.8536 3.85355C13.0488 3.65829 13.0488 3.34171 12.8536 3.14645C12.6583 2.95118 12.3417 2.95118 12.1464 3.14645L8.14645 7.14645C7.95118 7.34171 7.95118 7.65829 8.14645 7.85355L12.1464 11.8536C12.3417 12.0488 12.6583 12.0488 12.8536 11.8536C13.0488 11.6583 13.0488 11.3417 12.8536 11.1464L9.20711 7.5L12.8536 3.85355Z"}),Qe=o=>e.jsx(z,{...o,path:"M2.14645 11.1464C1.95118 11.3417 1.95118 11.6583 2.14645 11.8536C2.34171 12.0488 2.65829 12.0488 2.85355 11.8536L6.85355 7.85355C7.04882 7.65829 7.04882 7.34171 6.85355 7.14645L2.85355 3.14645C2.65829 2.95118 2.34171 2.95118 2.14645 3.14645C1.95118 3.34171 1.95118 3.65829 2.14645 3.85355L5.79289 7.5L2.14645 11.1464ZM8.14645 11.1464C7.95118 11.3417 7.95118 11.6583 8.14645 11.8536C8.34171 12.0488 8.65829 12.0488 8.85355 11.8536L12.8536 7.85355C13.0488 7.65829 13.0488 7.34171 12.8536 7.14645L8.85355 3.14645C8.65829 2.95118 8.34171 2.95118 8.14645 3.14645C7.95118 3.34171 7.95118 3.65829 8.14645 3.85355L11.7929 7.5L8.14645 11.1464Z"}),Ye=o=>e.jsx(z,{...o,path:"M2 8c0-.733.6-1.333 1.333-1.333.734 0 1.334.6 1.334 1.333s-.6 1.333-1.334 1.333C2.6 9.333 2 8.733 2 8zm9.333 0c0-.733.6-1.333 1.334-1.333C13.4 6.667 14 7.267 14 8s-.6 1.333-1.333 1.333c-.734 0-1.334-.6-1.334-1.333zM6.667 8c0-.733.6-1.333 1.333-1.333s1.333.6 1.333 1.333S8.733 9.333 8 9.333 6.667 8.733 6.667 8z"}),Xe={icon:Ye},B=M((o,s)=>{const a=k("PaginationDots",Xe,o),{classNames:n,className:r,style:c,styles:i,vars:d,icon:p,...m}=a,g=E();return e.jsx(W,{ref:s,...g.getStyles("dots",{className:r,style:c,styles:i,classNames:n}),...m,children:e.jsx(p,{style:{width:"calc(var(--pagination-control-size) / 1.8)",height:"calc(var(--pagination-control-size) / 1.8)"}})})});B.classes=A;B.displayName="@mantine/core/PaginationDots";function O({icon:o,name:s,action:a,type:n}){const r={icon:o},c=L.forwardRef((i,d)=>{const{icon:p,...m}=k(s,r,i),g=E(),u=n==="next"?g.active===g.total:g.active===1;return e.jsx(I,{disabled:g.disabled||u,ref:d,onClick:g[a],withPadding:!1,...m,children:e.jsx(p,{className:"mantine-rotate-rtl",style:{width:"calc(var(--pagination-control-size) / 1.8)",height:"calc(var(--pagination-control-size) / 1.8)"}})})});return c.displayName=`@mantine/core/${s}`,we(c)}const ae=O({icon:qe,name:"PaginationNext",action:"onNext",type:"next"}),ne=O({icon:He,name:"PaginationPrevious",action:"onPrevious",type:"previous"}),ie=O({icon:Ke,name:"PaginationFirst",action:"onFirst",type:"previous"}),re=O({icon:Qe,name:"PaginationLast",action:"onLast",type:"next"});function q({dotsIcon:o}){const s=E(),a=s.range.map((n,r)=>n==="dots"?e.jsx(B,{icon:o},r):e.jsx(I,{active:n===s.active,"aria-current":n===s.active?"page":void 0,onClick:()=>s.onChange(n),disabled:s.disabled,...s.getItemProps?.(n),children:s.getItemProps?.(n)?.children??n},r));return e.jsx(e.Fragment,{children:a})}q.displayName="@mantine/core/PaginationItems";const et={siblings:1,boundaries:1},tt=Te((o,{size:s,radius:a,color:n,autoContrast:r})=>({root:{"--pagination-control-radius":a===void 0?void 0:Ie(a),"--pagination-control-size":Ae(s,"pagination-control-size"),"--pagination-control-fz":ke(s),"--pagination-active-bg":n?Se(n,o):void 0,"--pagination-active-color":ze(r,o)?Le({color:n,theme:o,autoContrast:r}):void 0}})),Z=M((o,s)=>{const a=k("PaginationRoot",et,o),{classNames:n,className:r,style:c,styles:i,unstyled:d,vars:p,total:m,value:g,defaultValue:u,onChange:v,disabled:x,siblings:j,boundaries:f,color:y,radius:N,onNextPage:t,onPreviousPage:S,onFirstPage:l,onLastPage:P,getItemProps:w,autoContrast:F,attributes:le,...ce}=a,H=Ne({name:"Pagination",classes:A,props:a,className:r,style:c,classNames:n,styles:i,unstyled:d,attributes:le,vars:p,varsResolver:tt}),{range:de,setPage:me,next:he,previous:ge,active:pe,first:ue,last:xe}=Je({page:g,initialPage:u,onChange:v,total:m,siblings:j,boundaries:f}),je=_(t,he),fe=_(S,ge),Pe=_(l,ue),ve=_(P,xe);return e.jsx(Ge,{value:{total:m,range:de,active:pe,disabled:x,getItemProps:w,onChange:me,onNext:je,onPrevious:fe,onFirst:Pe,onLast:ve,getStyles:H},children:e.jsx(W,{ref:s,...H("root"),...ce})})});Z.classes=A;Z.displayName="@mantine/core/PaginationRoot";const st={withControls:!0,withPages:!0,siblings:1,boundaries:1,gap:8},C=M((o,s)=>{const a=k("Pagination",st,o),{withEdges:n,withControls:r,getControlProps:c,nextIcon:i,previousIcon:d,lastIcon:p,firstIcon:m,dotsIcon:g,total:u,gap:v,hideWithOnePage:x,withPages:j,...f}=a;return u<=0||x&&u===1?null:e.jsx(Z,{ref:s,total:u,...f,children:e.jsxs(G,{gap:v,children:[n&&e.jsx(ie,{icon:m,...c?.("first")}),r&&e.jsx(ne,{icon:d,...c?.("previous")}),j&&e.jsx(q,{dotsIcon:g}),r&&e.jsx(ae,{icon:i,...c?.("next")}),n&&e.jsx(re,{icon:p,...c?.("last")})]})})});C.classes=A;C.displayName="@mantine/core/Pagination";C.Root=Z;C.Control=I;C.Dots=B;C.First=ie;C.Last=re;C.Next=ae;C.Previous=ne;C.Items=q;const ot=[["path",{d:"M4 4h16v2.172a2 2 0 0 1 -.586 1.414l-4.414 4.414v7l-6 2v-8.5l-4.48 -4.928a2 2 0 0 1 -.52 -1.345v-2.227z",key:"svg-0"}]],se=Fe("outline","filter","Filter",ot);function at(){const o=oe(),s=De(n=>n.userSlice.allUsers),a=s===null;return L.useEffect(()=>{s!==null||(async()=>{try{const r="http://localhost:8181",c=localStorage.getItem("token")||sessionStorage.getItem("token");$.defaults.headers.common["x-auth-token"]=c;const i=await $.get(`${r}/api/users`);o(Ue(i.data))}catch(r){R.show({title:"Error",message:r?.message||"Failed to load users",color:"red"})}})()},[s]),{allUsers:s,isLoading:a}}const nt=()=>{const o=oe(),s=_e(),[a,{open:n,close:r}]=Re(!1),{allUsers:c,isLoading:i}=at(),[d,p]=L.useState(""),[m,g]=L.useState(""),u="",v=async l=>{if(!l)return R.show({title:"Error",message:"User ID not found.",color:"red"});const P=localStorage.getItem("token")||sessionStorage.getItem("token");$.defaults.headers.common["x-auth-token"]=P;try{(await $.delete(`${u}/api/users/${l}`)).status===200&&(R.show({title:"Warning",message:"Account Deleted.",color:"orange"}),o($e(l)))}catch(w){R.show({title:"Error",message:w.response.data.message,color:"red"})}},x=l=>l.isAdmin?"Admin":l.profileType==="business"?"Business":"Jobseeker",j=c?[...c].sort((l,P)=>{if(d==="last-name-asc"){const w=l.profileType==="jobseeker"?l.jobseekerProfile?.lastName:l.businessProfile?.companyName,F=P.profileType==="jobseeker"?P.jobseekerProfile?.lastName:P.businessProfile?.companyName;return(w||"").localeCompare(F||"")}else if(d==="last-name-desc"){const w=l.profileType==="jobseeker"?l.jobseekerProfile?.lastName:l.businessProfile?.companyName;return((P.profileType==="jobseeker"?P.jobseekerProfile?.lastName:P.businessProfile?.companyName)||"").localeCompare(w||"")}else{if(d==="account-type")return x(l).localeCompare(x(P));if(d==="date-created-old")return l.createdAt.localeCompare(P.createdAt);if(d==="date-created-new")return P.createdAt.localeCompare(l.createdAt)}return 0}):[],f=j?j.filter(l=>{const P=x(l);return`${l.profileType==="jobseeker"?`${l.jobseekerProfile?.firstName} ${l.jobseekerProfile?.lastName}`:l.businessProfile?.companyName} ${l.email} ${P}`.toLowerCase().includes(m.toLowerCase())}):[],[y,N]=L.useState(1),t=30,S=f?f.slice((y-1)*t,y*t):[];return{opened:a,open:n,close:r,dispatch:o,allUsers:c,isLoading:i,deleteUser:v,getAccountType:x,sortedUsers:j,filteredUsers:f,paginatedUsers:S,currentPage:y,setCurrentPage:N,usersPerPage:t,sortOption:d,setSortOption:p,searchTerm:m,setSearchTerm:g,jumpTo:s}},ct=()=>{const[o,s]=L.useState("");Me("(max-width: 768px)");const{opened:a,open:n,close:r,dispatch:c,allUsers:i,isLoading:d,deleteUser:p,paginatedUsers:m,currentPage:g,setCurrentPage:u,usersPerPage:v,sortOption:x,setSortOption:j,searchTerm:f,setSearchTerm:y,jumpTo:N}=nt();return d?e.jsxs(e.Fragment,{children:[e.jsxs(V,{align:"center",direction:"column",mt:100,children:[e.jsx(b,{size:"xl",fw:600,children:"Users Are Loading"}),e.jsx(Ee,{color:"cyan",size:"xl",mt:30})]}),";"]}):e.jsxs(e.Fragment,{children:[e.jsxs(V,{direction:"column",w:"100%",children:[e.jsx(Be,{fz:30,w:"fit",mx:"auto",my:"sm",children:"Admin Control Table"}),e.jsxs(J,{gap:"md",hiddenFrom:"md",mx:"auto",my:"md",w:"90%",children:[e.jsx(K,{data:[{value:"last-name-asc",label:"Last Name (A-Z)"},{value:"last-name-desc",label:"Last Name (Z-A)"},{value:"account-type",label:"Account Type"},{value:"date-created-old",label:"Date Created (Oldest First)"},{value:"date-created-new",label:"Date Created (Latest First)"}],placeholder:"Sort By",value:x,onChange:t=>{j(t||""),u(1)},rightSection:e.jsx(se,{})}),e.jsx(Q,{placeholder:"Search",rightSection:e.jsx(Y,{}),value:f,onChange:t=>y(t.target.value)})]}),e.jsxs(V,{direction:"row",gap:5,mx:"auto",my:"md",visibleFrom:"md",children:[e.jsx(K,{data:[{value:"last-name-asc",label:"Last Name (A-Z)"},{value:"last-name-desc",label:"Last Name (Z-A)"},{value:"account-type",label:"Account Type"},{value:"date-created-old",label:"Date Created (Oldest First)"},{value:"date-created-new",label:"Date Created (Latest First)"}],placeholder:"Sort By",value:x,onChange:t=>{j(t||""),u(1)},miw:210,rightSection:e.jsx(se,{})}),e.jsx(Q,{placeholder:"Search",rightSection:e.jsx(Y,{}),value:f,onChange:t=>y(t.target.value),miw:210})]}),e.jsx(J,{hiddenFrom:"md",gap:"md",mx:"auto",w:"90%",children:m.map(t=>e.jsx(Oe,{withBorder:!0,p:"md",children:e.jsxs(J,{gap:"xs",children:[e.jsx(G,{justify:"space-between",children:e.jsxs("div",{children:[e.jsx(b,{fw:600,size:"lg",children:t.profileType==="jobseeker"?`${t.jobseekerProfile?.firstName} ${t.jobseekerProfile?.lastName}`:t.businessProfile?.companyName}),e.jsx(b,{size:"sm",c:"dimmed",children:t.isAdmin?"Admin":t.profileType==="business"?"Business":"Jobseeker"})]})}),e.jsx(b,{size:"sm",children:t.email}),e.jsxs(b,{size:"xs",c:"dimmed",children:["Created: ",new Date(t.createdAt).toLocaleDateString()]}),e.jsxs(G,{gap:"xs",mt:"xs",children:[e.jsx(D,{size:36,variant:"outline",color:"yellow",onClick:()=>{c(X(!0)),N(`/edit-profile/${t?._id}`)},children:e.jsx(ee,{size:20})}),!t.isAdmin&&e.jsx(D,{size:36,variant:"outline",color:"red",onClick:()=>{n(),s(t._id)},children:e.jsx(te,{size:20})})]})]})},t._id))}),e.jsx(W,{visibleFrom:"md",children:e.jsx(h.ScrollContainer,{minWidth:800,children:e.jsxs(h,{verticalSpacing:"sm",maw:"75%",mx:"auto",children:[e.jsx(h.Thead,{children:e.jsxs(h.Tr,{children:[e.jsx(h.Th,{}),e.jsx(h.Th,{children:"First Name"}),e.jsx(h.Th,{children:"Last Name"}),e.jsx(h.Th,{children:"Email"}),e.jsx(h.Th,{children:"Account Type"}),e.jsx(h.Th,{children:"Date Created"}),e.jsx(h.Th,{children:"Edit"}),e.jsx(h.Th,{children:"Delete"})]})}),e.jsx(h.Tbody,{children:m.map(t=>e.jsxs(h.Tr,{children:[e.jsx(h.Td,{styles:{td:{borderLeft:"1px solid #eee",borderRight:"1px solid #eee"}},children:e.jsx(b,{fz:"sm",fw:"bold",c:"dimmed",ta:"center",children:m.indexOf(t)+1})}),e.jsx(h.Td,{children:e.jsx(b,{fz:"sm",fw:500,children:t.profileType==="jobseeker"?`${t.jobseekerProfile?.firstName} ${t.jobseekerProfile?.lastName}`:t.businessProfile?.companyName})}),e.jsx(h.Td,{children:e.jsx(b,{fz:"sm",fw:500,children:t.profileType==="jobseeker"?"Jobseeker":"Business"})}),e.jsx(h.Td,{children:e.jsx(Ze,{component:"button",size:"sm",children:t.email})}),e.jsx(h.Td,{children:e.jsx(b,{fz:"sm",children:t.isAdmin?"Admin":t.profileType==="business"?"Business":"Jobseeker"})}),e.jsx(h.Td,{children:e.jsx(b,{fz:"sm",children:new Date(t.createdAt).toLocaleString()})}),e.jsx(h.Td,{children:e.jsx(D,{size:30,variant:"outline",color:"yellow",onClick:()=>{c(X(!0)),N(`/edit-profile/${t?._id}`)},children:e.jsx(ee,{size:25,stroke:1.5})})}),!t.isAdmin&&e.jsx(h.Td,{styles:{td:{borderRight:"1px solid #eee"}},children:e.jsx(D,{size:30,variant:"outline",color:"red",onClick:()=>{n(),s(t._id)},children:e.jsx(te,{size:25,stroke:1.5})})})]},t._id))})]})})}),i&&e.jsx(C,{total:Math.ceil(i.length/v),value:g,onChange:t=>{u(t),window.scrollTo({top:0,behavior:"smooth"})},mt:"md",m:"auto"})]}),e.jsx(Ve,{opened:a,close:r,deleteUser:p,id:o})]})};export{ct as default};
